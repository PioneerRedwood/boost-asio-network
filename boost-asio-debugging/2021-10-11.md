# 2021-10-11

## 2021-10-08 ë¬¸ì œì  #2 ê³„ì†

```bash
Assertion failed: n == 0 && "iterator out of bounds", file C:\Temp\boost_1_77_0\boost_1_77_0\boost\asio\buffers_iterator.hpp, line 434
```

í•´ë‹¹  ì˜¤ë¥˜ëŠ” ë°˜ë“œì‹œ ì¼ì–´ë‚œë‹¤.

ì´ê²ƒì€ êµ¬ì¡°ì˜ ë¬¸ì œë¡œ ë°–ì— ì•ˆ ë³´ì¸ë‹¤. streambufë¥¼ ì½ëŠ” í•¸ë“¤ëŸ¬ëŠ” ìŠ¤ë ˆë“œë¡œë¶€í„° ì•ˆì „í•˜ì§€ ì•Šì€ê²ƒ ê°™ë‹¤. ì–´ë–¤ ìƒí™©ì—ì„œ ì¼ì–´ë‚˜ëŠ”ì§€ ì •í™•í•˜ê²ŒëŠ” ëª¨ë¥´ì§€ë§Œ ì¶”ë¡ ì€ í•  ìˆ˜ ìˆë‹¤. í•˜ë‚˜ì˜ ì„œë²„ì—ì„œ ì—¬ëŸ¬ê°€ì§€ì˜ í´ë¼ì´ì–¸íŠ¸ë¥¼ ìƒì„±í•˜ê³  ëª‡ë¶„ë§Œ ê¸°ë‹¤ë¦¬ë©´ ì´ëŸ¬í•œ ì—ëŸ¬ê°€ ë°œìƒí•˜ê³  í•œë²ˆì— ë‹¤ ì£½ì–´ë²„ë¦°ë‹¤. 

```C++
// boost-asio-network-client/main.cpp
boost::asio::io_context context;
ban::login_client<std::string> c(context);

if (c.start("127.0.0.1", 9000, 2000))
{
    std::cout << "client main login_client started .. \n";
}

bool bQuit = false;
std::vector<bool> key(5, false);
std::vector<bool> old_key(5, false);
try
{
    while (!bQuit && c.ptr()->connected())
    {
        if (GetForegroundWindow() == GetConsoleWindow())
        {
            key[0] = GetAsyncKeyState('1') & 0x8000;
            key[1] = GetAsyncKeyState('2') & 0x8000;
            key[2] = GetAsyncKeyState('3') & 0x8000;
            key[3] = GetAsyncKeyState('4') & 0x8000;
            key[4] = GetAsyncKeyState(VK_ESCAPE) & 0x8000;
        }
		// í‚¤ë³´ë“œ ì…ë ¥ì„ ë°”íƒ•ìœ¼ë¡œ ì„œë²„ì— ì „ì†¡
        if (key[0] && !old_key[0])
        {
            c.ptr()->send("login");
        }
        if (key[1] && !old_key[1])
        {
            c.ptr()->send("enter lobby");
        }
        if (key[2] && !old_key[2])
        {
            c.ptr()->send("start matching");
        }
        if (key[3] && !old_key[3])
        {
            //c.ptr()->send("searching room");
        }
        if (key[4] && !old_key[4])
        {
            //c.ptr()->send("disconnect");
            std::cout << "disconnection key pressed\n";
            c.stop();
            bQuit = true;
        }

        for (size_t i = 0; i < key.size(); ++i)
        {
            old_key[i] = key[i];
        }
    }

}
catch (const std::exception& exception)
{
    std::cerr << exception.what() << "\n";
}
```

ì…ë ¥ì´ ë™ì‹œì— ëˆŒë¦¬ê²Œ ëœë‹¤ë©´ async_write ë¶€ë¶„ì—ì„œ ë©”ì‹œì§€ê°€ ë‘ê°œê°€ ê²¹ì¹˜ê²Œ ë˜ê³  ì´ìƒí•œ ë¬¸ì¥ì´ ê°€ì„œ ì—ëŸ¬ë¥¼ ì¼ìœ¼í‚¬ ìˆ˜ ìˆë‹¤. ì´ê²ƒ ì—­ì‹œ ì˜ì‹¬.. ğŸ˜‘

ì¼ë‹¨ ì´ìŠˆë¡œ ë‚¨ê²¨ë†“ëŠ”ë‹¤.