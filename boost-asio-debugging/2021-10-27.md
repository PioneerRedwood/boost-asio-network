# 2021-10-27 디버깅 일지

[jacking75](https://github.com/jacking75)님의 깃허브를 통해 많은 공부를 하고 있다. 👍 아무래도 지엽적으로만 했던 코딩을 업그레이드할 때가 온것 같다. 

#### 진행 중

user, user_manager, lobby, lobby_manager 등 서버에서 런타임 인스턴스로 쓸 클래스를 구현하고 있다.

소켓을 사용하고 boost-asio를 사용하는 network connect session들을 만들다보니 겹치는 코드가 상당하다. 사실 이런 모습들은 초창기(그래봐야 boost-asio를 접한 21년 9월임) 전부터 보였다. 그래서 그냥 상속 구조를 사용해도 괜찮을 것 같다고 생각하고 tcp_connection이라는 이름의 클래스를 만든적이 있다. 그래서 서버 클래스내에 있는 session 클래스들은 다 tcp_connection의 원형과 매우 흡사하다.



#### 로비 접속 

lobby에 접속하는 것은 됐다. 예전부터 느낀 거지만 데이터를 직렬화, 역직렬화하는 과정은 고달프다... 한번 하면 참 좋을텐데... 이젠 할 차례다...

<img src="https://user-images.githubusercontent.com/45554623/139030482-5c6aa219-35ff-46f2-b310-bcb4436744b1.png">

로비에서 나가고 나서 서버에서의 처리가 원활하지 않다. 서버에서 stop()함수에 해당 아이디를 없애버리는 것을 하고 있는데 될 때도 있고 안될 때도 있는 현상이 발생하는데 다시 수정해야겠다.

클라이언트에서도 자신이 속한 로비가 무엇인지 알 수 있어야 하고 서버에서도 해당 session_id가 어디 로비에 속했는지 혹은 아닌지 알아야한다. 이에 대해선 개선점이 필요하다.



#### 진행 예정

로비에 N명이 차게 되면 게임이 시작되는 시스템을 만들어야 한다. 게임은 UDP로 통신할 예정이다. 동적으로 게임을 생성 -> 진행 -> 파괴 등을 모두 정상적으로 처리해야한다.
